%!TEX root = ../template.tex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% conclusion.tex
%% NOVA thesis document file
%%
%% Chapter with lots of dummy text
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\typeout{NT FILE conclusion.tex}

\chapter{Conlusions and future work} \label{cha:conclusions_future_work}

\subsection{Conclusion}

The edge computing paradigm has surged as the new up-and-coming solution to the limitations imposed by the cloud. The popularity of Edge Computing has grown as it allows applications to be enriched with new features, made possible by having available hardware closer to users. Furthermore, we believe this popularity is growing due to the size of the information produced outside the datacenter, as it will reach point where the cloud infrastructure will start to become a bottleneck when performing timely and accurate resource management decisions. For this reason, we argue in favour of performing decentralized resource management decisions, supported by partial knowledge of the system state, enabled by devices within and outside the data centers. This thesis is focused on enabling this behavior, through the development of a decentralized resource monitoring and management service, targeted for performing decentralized resource management actions in cloud-edge environments.

We studied not only the state of the art regarding these systems, but also the multiple areas which we believe to be crucial for building them: (1) the types of devices composing the cloud-edge environment, (2) how to federate these devices in overlay networks and how to optimize them, and (3) how to perform in-transit aggregation using these overlay networks. Through this study, we built a Decentralized Management and Monitoring (DeMMon) service, which at its’ roots uses a devised overlay network protocol which employs the nodes' configured bandwidth together with latency measurements to create and optimize a hierarchical tree-shaped network. This overlay network was built using the first contribution of this thesis, named GO-Babel, which consists in an event-based framework designed to ease building distributed systems' protocols. This framework is a port in Golang of \todo{cite}, however enriched with a fault detector and abstractions to perform latency measurements, which were a requirement for our protocol. Go-Babel's implementation has been tested through the implementation and testing conducted not not only for the devised protocol, but also for the baseline protocols used in the devised overlay protocols' evaluation. This overlay was tested in realistic testbeds, focusing on its’ capacity to establish and maintain the network even with node failures, and in its capacity to propagate information (through broadcasting messages). Obtained results not only show the protocols' validity, but also that the protocol can achieve higher throughput values when compared with state-of-the art baselines in certain node counts, while remaining equal in throughput at other node counts.

Using the devised membership protocol, we built decentralized aggregation primitives to allow the collection of metrics across DeMMon nodes in three distinct manners: hierachical aggregation (using the overlay tree), aggregation using a hop-based range, and global aggregation, which collects a globally aggregated value of the entire system. In our implementation, we took steps to ensure that the collection of metrics is possible to perform in an on-demand fashion, and that whenever possible, nodes aggregating the same metrics reuse each others' values. We tested these features in a realistic testbed, and compared their validity and applicability against a popular state of the art solution named Prometheus, which was configured with multiple tree-shaped setups. Obtained results show the validity of our solution, both with or without the presence of node failures, through achieving the correct aggregated values across multiple scenarios. Results also show that, as Prometheus configurations do not have to pay the price of maintaining the overlay network, these have the potential to incur in lower networking costs when aggregating lower metric counts. However, as the number of metrics increases, results show that typical centralized Prometheus approaches cannot scale in largser-scale systems, and Prometheus setups that do so by decentralizing the aggregation procedure become plagued with multiple points of failure which require manual configuration to recover from. 

The DeMMon service provides access to these primitives through an API built (and a corresponding GOlang client) in websockets. In addition, this API allows resource management systems and other services executing alongside DeMMon to insert/retrieve metrics from a Time-Series database, and to request (potentially aggregated) metrics (through the prevously mentioned decentralized aggregation primitives) from other nodes in the system in which the DeMMon service is inserted into. One of the focus of this work is to provide flexibility, consequently, aggregation functions which are employed to aggregate the metric values consist of user defined scripts. Furthermore, the metric values do not have a defined type (as long as they are serializable), which allows resource management applications to tailor these types to their needs, and to perform complex computations without resorting to a fixed set of aggregation functions (however at a cost of performance, when compared with better engineered state-of-the-art alternatives). In addition to this flexibility, the API also permits the execution of periodic functions to, for example, resample a time-series, or produce an aggregated value. The final presented API functionality is  alarming, which enables clients to receive notifications conditioned by the return value of user-defined functions. 

Finally, as the initial vision of this thesis was of integrating deMMon with a decentralized service deployment system, which relies on DeMMons' hierarchical structure and decentralized aggregation primitives to optimize the deployments of services through resource management decisions based on partial (or global) knowledge of the state of the system, we contributed to the vision through the collaborative creation of a benchmark edge-enabled application to test the complete stack. This benchmark application, named ``PouchBeasts'', aims to provide a decentralized implementation, through microservices, of an interactive multiplayer game with functionality  inspired from the popular game PokemonGO. We believe this contribution helps tackle what is currently an obstacle for the development of these systems, given that, to our knowledge, there were no free and open-source realistic implementations of edge-enabled applications which could test our complete vision.

\subsection{Future work}

As future work, there are ideas provenient from both the initial thesis vision and the development of our work and the various components that materialize it. 

Regarding the overlay protocol, we believe there are multiple venues that may be taken either improve the existing protocol or to devise a new one based on the current presented work. First, we believe there are possible improvements to be had in regard to reducing the necessary messages for performing maintenance of the established logical connections, for example, by stopping the periodically emition of certain messages whenever the logical connections are established, consequently reducing the networking cost of maintaining the overlay. Second, we believe that it may be the possible to insert additional mechanisms to attempt to balance the overlay tree, aiming to decrease the number of hops and increase the latency incurred by messages sent in information dissemination scenarios. The third aspect we believe may be improved in this protocol, is to address the need for manual configuration and fault-recovery of the bootstrap nodes, either by creating a new specialized protocol to perform this function, or by embedding this feature into the protocol.

We also believe there is future work regarding the devised aggregation primitives, from adding new efficient aggregation primitives that rely on the abstractions provided by the tree, to (similarly to the overlay protocol), reducing the overhead of maintaining the aggregation mechanisms by. For example, by replacing the emition of messages periodically that maintain aggregation trees with a mechanism that does this on a on-demand basis (for example, maintaining established aggregation trees by sending messages solely when nodes switch parent, nodes crash, or links fail).

Then, we believe another venue worth pursuing is to improve the efficiency of the evaluation of queries, namely experimenting with alternative libraries that evaluate user-defined code, or creating our own, tailored for our needs. In addition, we believe it would be valuable to replace the metric propagation protocol with a more efficient protocol (possibly not JSON-based).

Finally, as future work we plan to improve the stability of the built components by creating unit and integration tests, and to further separate the components through interfaces which materialize this solution, such that each individual component can be replaced with another that satisfies the same interface. We believe our solution can be improved in this regard through, for example, separating the offered broadcast primitives from the membership protocol. 
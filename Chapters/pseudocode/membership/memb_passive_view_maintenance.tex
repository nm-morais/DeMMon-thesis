\begin{algorithm}
% \setstretch{0.85}
\begin{algorithmic}[1]

    \caption{Passive view Maintenance}

    \asdstate
        \State eView : set<Node>
    \asdend

    \asdrepeateveryx[config.RandWalkPeriodicity]
        \State ascNeighs, allNeighs = set
        \State ascNeighs = ascNeighs + parent + siblings
        \State allNeighs = allNeighs + ascNeighs + children
        \State sample = getRandSample(eView + allNeighs, config.NrPeersToMergeRandWalk)
        \State sendMessage(RandomWalk<sample, config.RandWalkTTL, self.ID, self.IP>, getRand(ascNeighs))
    \asdend

    \asdupon[receive( RandomWalk<sample, ttl, nID, orig>, sender)]
        \State stepsTaken = config.RandWalkTTL - ttl
        \State nrToAdd = config.NrPeersToMergeRandWalk
        \State nrToMerge = config.NrPeersToMergeRandWalk
        \State ascNeighs, allNeighs = set(), set()
        \State ascNeighs = ascNeighs + parent + siblings
        \State allNeighs = allNeighs + ascNeighs + children

        \If{stepsTaken < config.NrStepsToIgnore:
            \State nrToMerge = 0
        \EndIf

        \State toAdd = getRandSample(excludeDescendantsOf([eView + allNeighs] / sample),nID), nrToAdd)
        \State toRemoveFromSample = getRandSample(sample, nrToMerge)
        \State sample = sample / toRemoveFromSample
        \State sample = sample + toAdd
        \State target = getRand(excludeDescendantsOf(allNeighs, nID)
        \If{target == nil || ttl == 0}
            \State sendMessageSideChannel(RandomWalkReply<sample>, orig)
        \Else
            \State sendMessage(RandomWalk<sample, ttl-1, nID, orig>, get_random(ascNeighs))
        \EndIf
        \State eView = excludeDescendantsOf(toRemoveFromSample, self.ID)  + eView
        \State eView = eView / allNeighs
        \State eView = eView[:config.MaxEViewSize]
    \asdend

    \asdprocedure{isDescendentOf(nodeID, PotentialDescID)}:
        return PotentialDescID.Contains(nodeID)

\end{algorithmic}
\end{algorithm}